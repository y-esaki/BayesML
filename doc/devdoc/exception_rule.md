<img src="../logos/BayesML_logo.png" width="200">

# 例外処理の原則 ver.4
<div style="text-align:right">
作成：中原
</div>

* ベイズ統計，ベイズ決定理論の研究，教育，活用に資する例外の検出に注力し，その他は組み込み例外などに任せる．
* 上記を踏まえ，以下の例外クラスを自作する．
  * ParameterFormatError
    * 分析者が設定したパラメータがモデルの仮定に反するときに用いる．
    * 例，分散共分散行列が正定値対称行列でない．
  * DataFormatError
    * 分析者が入力したデータがモデルの仮定に反するときに用いる．
    * 例，カテゴリカル分布に従うはずのデータの型が整数型でない．
  * CriteriaError
    * 推定値，予測値を出力する際の評価基準として，未対応の基準が入力されたときに用いる．
    * 例，中央値が解析的に計算できないような分布に対して絶対損失が指定された．
  * ResultWorning
    * 分析の実行結果に問題がある場合に用いる．
    * 例，変分下界の減少が発生した．変分下界の収束ではなく，最大反復回数に達したことでアルゴリズムが終了した．
  * ParameterFormatWarning
    * パラメータの形式を他のパラメータに合わせて変更した場合などに用いる．
    * 例，set_h_paramsで指定したハイパーパラメータの次元が元々設定されていた次元より大きかったため上書きした．
* 基本的に例外が起きたら停止させたいので，try except文は使わず，例外をraiseしっぱなしでよい．
* 例外に関するコメントとして，自明なものは避ける
  * 例，set_paramで発生した例外に対して，"Parameter setting error!"などと書くのではなく，"p must be a positive number"などとパラメータの満たすべき条件を具体的に書く．
* 入力値を判定する関数で，よく使うものは`bayesml/_check.py`に書いておき，1変数の値の妥当性はこれでチェックする．
* 2つ以上の変数の次元の整合性はは`bayesml/_check/shape_consistency`関数を使う．それ以上複雑な入力値チェックは個別のモデル上で実装する．